import streamlit as st
import matplotlib.pyplot as plt
import pandas as pd
from PIL import Image

st.set_page_config(layout="wide")
st.title("표고버섯 소셜 빅데이터 분석 (2019-2023)")
st.subheader("총 언급량: 222,000회 | 67% 증가 추세")

# =========================
# 1. 주요 키워드 (워드클라우드)
# =========================
st.markdown("### 1. 주요 키워드")
st.image("wordcloud_output.png", use_column_width=True)

# =========================
# 2. 연도별 언급량 추이
# =========================
st.markdown("### 2. 연도별 언급량 추이")
year_data = pd.DataFrame({
    '연도': ['2019', '2020', '2021', '2022', '2023'],
    '언급량': [31500, 43800, 45200, 48900, 52600]
})
st.bar_chart(data=year_data.set_index("연도"))

# =========================
# 3. 계절별 언급 분포
# =========================
st.markdown("### 3. 계절별 언급 분포")
season_data = pd.Series(
    [26, 17, 29, 28],
    index=["봄", "여름", "가을", "겨울"]
)
fig, ax = plt.subplots()
ax.pie(season_data, labels=season_data.index, autopct='%1.1f%%', startangle=90)
ax.axis("equal")
st.pyplot(fig)

# =========================
# 4. 감성 분석
# =========================
st.markdown("### 4. 감성 분석")
st.markdown("- 긍정 76% (169,100회): \"향이 좋다\", \"건강에 좋은\"  
- 부정 8% (17,800회)  
- 중립 16% (35,600회)")

# =========================
# 5. 토픽 모델링
# =========================
st.markdown("### 5. 토픽 모델링")
topic_data = pd.DataFrame({
    '토픽': ['요리/레시피', '건강/효능', '생산/재배', '유통/가격'],
    '비율': [38, 32, 18, 12]
}).set_index("토픽")
st.bar_chart(topic_data)

# =========================
# 6. 연령대별 관심도
# =========================
st.markdown("### 6. 연령대별 관심도")
st.markdown("""
- 20~30대: 31% (69,000회) - 채식/비건(45%), 다이어트(33%)  
- 40~50대: 42% (93,450회) - 건강/면역(48%), 전통요리(32%)  
- 60대+: 27% (60,050회) - 약용/건강식품(52%), 농업(38%)
""")

# =========================
# 7. 용도별 활용 분석
# =========================
st.markdown("### 7. 용도별 활용 분석")

use_data = pd.DataFrame({
    '요리 용도': [27, 25, 18, 8],
    '건강 효능': [38, 22, 18, 12]
}, index=['국물/육수', '볶음', '채소대체식', '샐러드/기타'])
st.bar_chart(use_data)

# =========================
# 8. 핵심 인사이트
# =========================
st.markdown("### 8. 핵심 인사이트")
st.markdown("""
- ✅ 5년간 67% 성장 (31.5K → 52.6K회)  
- ✅ 긍정 감성 76% - 맛과 건강효능 인정  
- ✅ 요리용도 38% vs 건강효능 32% 양대 관심축  
- ✅ 40~50대 42% 최고 관심층 (건강/면역 중심)  
- ✅ MZ세대 31% - 채식/비건 트렌드 견인  
- ✅ 계절별 고른 분포 - 사계절 꾸준한 관심  
- ✅ 생산/재배 18% - 귀농·스마트팜 관심 증가
""")

# =========================
# 9. 표고버섯 소셜 트렌드 전망
# =========================
st.markdown("### 9. 표고버섯 소셜 트렌드 전망")

col1, col2, col3 = st.columns(3)

with col1:
    st.markdown("#### 성장 동력")
    st.markdown("""
    - 건강식품 관심 증가로 면역·콜레스테롤 효능 주목  
    - MZ세대 채식/비건 트렌드로 식물성 단백질 대안 부상  
    - 스마트팜·귀농 관심으로 생산·재배 콘텐츠 확산
    """)

with col2:
    st.markdown("#### 마케팅 포인트")
    st.markdown("""
    - 40~50대: 건강효능(면역·콜레스테롤) 중심 소구  
    - 20~30대: 채식 레시피/다이어트 콘텐츠 활용  
    - 60대+: 전통 요리·농업 정보와 연계
    """)

with col3:
    st.markdown("#### 콘텐츠 전략")
    st.markdown("""
    - 요리 레시피 38% vs 건강정보 32% 균형 배치  
    - 계절별 맞춤 콘텐츠 (봄/가을 생산, 겨울 면역)  
    - 긍정 감성 76% 활용한 브랜딩 강화
    """)

st.markdown("*데이터 출처: 소셜미디어 빅데이터 분석 (네이버, 카카오, 인스타그램, 유튜브, 블로그 등)*")
